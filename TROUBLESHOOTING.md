# Руководство по устранению неполадок

## Общие проблемы и их решение

### 1. Белый экран при открытии сайта

#### Симптомы:
- Страница полностью белая
- Нет контента, только белый фон
- Возможно виден только заголовок вкладки

#### Причины:
- JavaScript файлы не загружаются
- Ошибки в коде
- Неправильные пути к файлам

#### Решение:

**Шаг 1: Проверьте консоль браузера**
```
1. Нажмите F12
2. Перейдите на вкладку "Console"
3. Посмотрите на ошибки (красные сообщения)
```

**Шаг 2: Проверьте загрузку файлов**
```
1. В DevTools перейдите на вкладку "Network"
2. Обновите страницу (Ctrl+F5)
3. Найдите файлы с расширением .js и .css
4. Проверьте их статус (должен быть 200 OK)
```

**Шаг 3: Проверьте структуру файлов**
```
Убедитесь что в корне сайта есть:
- index.html
- папка assets/ с файлами .js и .css
```

**Шаг 4: Очистите кэш**
```
1. Нажмите Ctrl+Shift+Delete
2. Выберите "Кэшированные изображения и файлы"
3. Нажмите "Удалить данные"
4. Обновите страницу (Ctrl+F5)
```

---

### 2. Ошибка 404 при переходе по ссылкам

#### Симптомы:
- При клике на ссылки в меню появляется 404
- Прямой доступ к URL (например, /about) не работает
- Главная страница открывается, но другие - нет

#### Причины:
- mod_rewrite не включен
- .htaccess не работает
- AllowOverride отключен

#### Решение:

**Для Apache:**

**Шаг 1: Проверьте .htaccess**
```
Файл должен находиться в корне сайта (рядом с index.html)
Содержимое файла должно начинаться с:
<IfModule mod_rewrite.c>
  RewriteEngine On
  ...
```

**Шаг 2: Включите mod_rewrite**
```
1. Откройте Open Server
2. Правый клик → "Настройки"
3. "Модули" → "Apache"
4. Найдите mod_rewrite и включите
5. Перезапустите Apache
```

**Шаг 3: Проверьте AllowOverride**
```
Откройте файл httpd.conf (через Open Server):
1. Правый клик → "Настройки"
2. "Файлы конфигурации" → "Apache httpd.conf"
3. Найдите секцию <Directory>
4. Убедитесь что есть строка: AllowOverride All
5. Если нет - добавьте и перезапустите Apache
```

**Для Nginx:**

Добавьте в конфигурацию домена:
```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

---

### 3. Изображения не отображаются

#### Симптомы:
- Вместо изображений пустые блоки
- Иконки не загружаются
- Favicon не виден

#### Причины:
- Файлы изображений не скопированы
- Неправильные пути
- Проблемы с правами доступа

#### Решение:

**Шаг 1: Проверьте наличие файлов**
```
В корне сайта должны быть:
- favicon.svg
- placeholder.svg
- папка 4x/ с изображениями
```

**Шаг 2: Проверьте загрузку в браузере**
```
1. F12 → вкладка "Network"
2. Фильтр "Img"
3. Обновите страницу
4. Посмотрите статус загрузки каждого изображения
```

**Шаг 3: Проверьте пути**
```
Если изображения дают 404:
1. Проверьте что путь в HTML соответствует реальному расположению
2. Убедитесь что нет опечаток в названиях файлов
3. Проверьте регистр букв (image.jpg ≠ Image.jpg на Linux)
```

**Шаг 4: Права доступа**
```
Правый клик на папке сайта → Свойства → Безопасность
Убедитесь что есть права на чтение для всех файлов
```

---

### 4. Стили не применяются

#### Симптомы:
- Сайт выглядит как простой текст
- Нет цветов, шрифтов, отступов
- Элементы расположены в колонку

#### Причины:
- CSS файлы не загружаются
- Неправильные пути к CSS
- Блокировка загрузки стилей

#### Решение:

**Шаг 1: Проверьте консоль**
```
F12 → Console
Ищите ошибки связанные с CSS файлами
```

**Шаг 2: Проверьте загрузку CSS**
```
1. F12 → Network → фильтр "CSS"
2. Обновите страницу
3. Найдите файл с расширением .css
4. Проверьте статус (должен быть 200)
```

**Шаг 3: Проверьте файлы**
```
В папке assets/ должны быть:
- index-[hash].css (или похожее название)
```

**Шаг 4: Жесткое обновление**
```
Ctrl+Shift+R (Windows/Linux)
Cmd+Shift+R (Mac)
Это обновит страницу игнорируя кэш
```

---

### 5. Ошибка "Cannot GET /..."

#### Симптомы:
- При открытии страницы текст "Cannot GET /about"
- Ошибка появляется для всех маршрутов кроме главной

#### Причины:
- Серверная маршрутизация не настроена
- .htaccess не работает
- Используется неправильный сервер

#### Решение:

**Вариант 1: Настройте .htaccess**
```
См. раздел "Ошибка 404 при переходе по ссылкам"
```

**Вариант 2: Используйте HashRouter**
```javascript
// В файле src/App.tsx замените:
import { BrowserRouter } from "react-router-dom";
// на:
import { HashRouter } from "react-router-dom";

// И замените компонент:
<BrowserRouter>
// на:
<HashRouter>

// После этого пересоберите проект: npm run build
// URL будут выглядеть так: http://site.com/#/about
```

---

### 6. Ошибки в консоли браузера

#### Типичные ошибки:

**A. "Failed to load resource: net::ERR_FILE_NOT_FOUND"**
```
Решение:
- Проверьте что все файлы из dist скопированы
- Убедитесь что структура папок сохранена
- Проверьте права доступа к файлам
```

**B. "Uncaught SyntaxError: Unexpected token '<'"**
```
Решение:
- JavaScript файл загружается как HTML (обычно 404)
- Проверьте пути к JS файлам
- Убедитесь что .htaccess работает
```

**C. "Failed to fetch"**
```
Решение:
- Проблема с сетью или CORS
- Проверьте доступность внешних CDN
- Убедитесь что есть интернет (для CDN скриптов)
```

**D. "Uncaught ReferenceError: process is not defined"**
```
Решение:
- Проблема с environment variables
- Пересоберите проект: npm run build
- Убедитесь что используете production сборку
```

---

### 7. Медленная загрузка сайта

#### Симптомы:
- Сайт открывается более 3 секунд
- Долгая загрузка страниц
- Задержки при навигации

#### Причины:
- Не включено сжатие
- Не настроено кэширование
- Не оптимизированы изображения

#### Решение:

**Шаг 1: Включите GZIP**
```
В .htaccess должна быть секция:
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css ...
</IfModule>

Проверьте что mod_deflate включен в Apache
```

**Шаг 2: Настройте кэширование**
```
В .htaccess проверьте секцию mod_expires
Она должна кэшировать статические файлы
```

**Шаг 3: Проверьте размер файлов**
```
1. F12 → Network
2. Обновите страницу
3. Посмотрите столбец "Size"
4. JS файлы должны быть минифицированы (< 1MB)
```

---

### 8. Проблемы с Open Server

#### A. Open Server не запускается

```
Решение:
1. Закройте все программы использующие порты 80/443
2. Проверьте логи: Правый клик → Логи → System
3. Перезагрузите компьютер
4. Переустановите Open Server
```

#### B. Домен не открывается

```
Решение:
1. Проверьте файл hosts: C:\Windows\System32\drivers\etc\hosts
2. Должна быть строка: 127.0.0.1 mysite.local
3. Очистите DNS кэш: ipconfig /flushdns
4. Перезапустите Open Server
```

#### C. Apache не стартует

```
Решение:
1. Проверьте логи Apache: Правый клик → Логи → Apache Error
2. Проверьте конфигурацию: правый клик → "Проверить конфигурацию"
3. Отключите другие веб-серверы (IIS, другие Apache)
4. Поменяйте порт в настройках Open Server
```

---

### 9. Проблемы при сборке

#### A. "npm install" завершается с ошибкой

```
Решение:
1. Удалите папку node_modules
2. Удалите файл package-lock.json
3. Выполните: npm cache clean --force
4. Выполните: npm install снова
```

#### B. "npm run build" падает с ошибкой

```
Решение:
1. Проверьте консоль на конкретную ошибку
2. Убедитесь что установлены все зависимости
3. Проверьте версию Node.js: node -v (должна быть 18+)
4. Попробуйте: npm run build -- --mode production
```

#### C. Папка dist не создается

```
Решение:
1. Проверьте права доступа к папке проекта
2. Закройте все файлы из папки dist (если открыты)
3. Удалите папку dist вручную и запустите build снова
4. Запустите терминал от имени администратора
```

---

## Диагностические команды

### Проверка версий
```bash
node -v          # Должна быть 18 или выше
npm -v           # Должна быть 9 или выше
```

### Очистка и переустановка
```bash
# Полная очистка
rm -rf node_modules package-lock.json dist
npm cache clean --force
npm install
npm run build
```

### Проверка портов
```bash
# Windows
netstat -ano | findstr :80
netstat -ano | findstr :443

# Linux/Mac
lsof -i :80
lsof -i :443
```

### Проверка прав доступа
```bash
# Linux/Mac
ls -la dist/
chmod -R 755 dist/
```

---

## Логи для диагностики

### Open Server логи:
1. Apache Error: `Правый клик → Логи → Apache Error`
2. Apache Access: `Правый клик → Логи → Apache Access`
3. PHP Error: `Правый клик → Логи → PHP Error`
4. System: `Правый клик → Логи → System`

### Браузерные логи:
1. Console (F12 → Console)
2. Network (F12 → Network)
3. Application (F12 → Application → Local Storage)

### Build логи:
```bash
npm run build > build.log 2>&1
# Откройте файл build.log для анализа
```

---

## Контрольный список диагностики

При возникновении проблемы проверьте:

- [ ] Версия Node.js 18 или выше
- [ ] Все зависимости установлены (node_modules существует)
- [ ] Сборка прошла успешно (папка dist создана)
- [ ] Все файлы скопированы на сервер
- [ ] Файл .htaccess в корне сайта
- [ ] mod_rewrite включен в Apache
- [ ] AllowOverride разрешен
- [ ] Apache запущен
- [ ] Нет конфликтов портов
- [ ] Домен прописан в hosts
- [ ] DNS кэш очищен
- [ ] Кэш браузера очищен
- [ ] Нет ошибок в консоли браузера
- [ ] Нет ошибок в логах Apache

---

## Получение помощи

Если проблема не решена:

1. **Соберите информацию:**
   - Скриншоты ошибок
   - Логи из консоли браузера
   - Логи Apache/Nginx
   - Версии ПО (Node.js, NPM, Open Server)

2. **Проверьте документацию:**
   - OPEN_SERVER_README.md
   - BUILD_GUIDE.md
   - DEPLOYMENT_SUMMARY.md

3. **Проверьте типичные причины:**
   - 90% проблем связаны с mod_rewrite
   - 5% с правами доступа к файлам
   - 5% с кэшированием браузера

---

**Версия:** 1.0  
**Обновлено:** 18 января 2026
