# Быстрый старт: Развертывание на Open Server

## Для пользователей Windows

### Автоматическая сборка (Простой способ)

1. Дважды щелкните файл `build-for-open-server.bat`
2. Дождитесь завершения сборки
3. Перейдите в папку `dist`
4. Скопируйте все содержимое в вашу папку Open Server

### Ручная сборка

```bash
npm install
npm run build
```

## Установка на Open Server

### Шаг 1: Подготовка
После выполнения сборки у вас будет папка `dist` со следующей структурой:
```
dist/
├── index.html          (главный HTML файл)
├── .htaccess          (конфигурация для Apache)
├── web.config         (конфигурация для IIS)
├── assets/            (JavaScript и CSS файлы)
├── favicon.svg        
├── placeholder.svg    
├── robots.txt         
└── 4x/                (изображения)
```

### Шаг 2: Копирование файлов

**Вариант A: Сайт в корне домена**
1. Откройте Open Server
2. Перейдите в папку вашего сайта (например, `C:\OpenServer\domains\mysite\`)
3. Скопируйте ВСЕ файлы из папки `dist` в корень сайта
4. Убедитесь, что файл `.htaccess` присутствует

**Вариант B: Сайт в подпапке**
1. Создайте подпапку (например, `C:\OpenServer\domains\mysite\app\`)
2. Скопируйте все файлы из `dist` в эту подпапку
3. Откройте файл `.htaccess` и измените `RewriteBase /` на `RewriteBase /app/`

### Шаг 3: Настройка Apache (если используется Apache)

1. Откройте Open Server
2. Нажмите на иконку Open Server в трее
3. Выберите "Настройки" → "Модули" → "Apache"
4. Убедитесь, что модуль `mod_rewrite` включен
5. Перезапустите Apache

**Проверка mod_rewrite:**
В файле `httpd.conf` должна быть строка:
```apache
LoadModule rewrite_module modules/mod_rewrite.so
```

### Шаг 4: Настройка виртуального хоста (опционально)

Если хотите создать отдельный домен (например, `mysite.local`):

1. Откройте Open Server → "Настройки" → "Домены" → "Управление доменами"
2. Добавьте новый домен:
   - Имя домена: `mysite.local`
   - Папка: путь к папке с вашим сайтом
3. Сохраните и перезапустите Open Server
4. Откройте браузер и перейдите по адресу `http://mysite.local`

### Шаг 5: Проверка работы

Откройте браузер и перейдите по адресу вашего сайта. Проверьте:
- [ ] Главная страница открывается
- [ ] Навигация по разделам работает
- [ ] Изображения загружаются
- [ ] Прямые ссылки работают (например, `http://mysite.local/about`)
- [ ] Нет ошибок в консоли браузера (F12)

## Настройка для Nginx (если используется)

Если Open Server использует Nginx вместо Apache:

1. Откройте файл конфигурации Nginx для вашего домена
2. Добавьте следующую конфигурацию:

```nginx
server {
    listen 80;
    server_name mysite.local;
    root C:/OpenServer/domains/mysite;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

3. Сохраните файл
4. Перезапустите Nginx в Open Server

## Устранение проблем

### Проблема: Белый экран при открытии сайта

**Причина:** Ошибка загрузки JavaScript файлов

**Решение:**
1. Откройте консоль браузера (F12)
2. Перейдите на вкладку "Console"
3. Проверьте наличие ошибок 404
4. Убедитесь, что все файлы из `dist/assets` скопированы

### Проблема: 404 ошибка при переходе по ссылкам

**Причина:** mod_rewrite не работает или .htaccess не применяется

**Решение:**
1. Проверьте, что файл `.htaccess` находится в корне сайта
2. Убедитесь, что mod_rewrite включен в Apache
3. Проверьте, что в конфигурации Apache разрешен `.htaccess`:
   ```apache
   <Directory "C:/OpenServer/domains">
       AllowOverride All
   </Directory>
   ```
4. Перезапустите Apache

### Проблема: Изображения не загружаются

**Причина:** Неправильные пути к изображениям

**Решение:**
1. Проверьте, что папка `4x` и файлы `favicon.svg`, `placeholder.svg` скопированы
2. Убедитесь, что пути в коде соответствуют структуре папок

### Проблема: Стили не применяются

**Причина:** CSS файлы не загружаются

**Решение:**
1. Проверьте консоль браузера на ошибки загрузки CSS
2. Убедитесь, что файлы из `dist/assets` скопированы
3. Очистите кэш браузера (Ctrl+Shift+Delete)

### Проблема: "Access denied" или ошибки прав доступа

**Решение:**
1. Щелкните правой кнопкой по папке сайта
2. Выберите "Свойства" → "Безопасность"
3. Убедитесь, что у пользователя есть права на чтение и выполнение
4. Перезапустите Open Server

## Важные замечания

### Интернет-подключение
Сайт использует внешние CDN ресурсы:
- CDN poehali.dev (скрипты аналитики)
- Yandex.Metrika (счетчик посещений)

Для локального тестирования убедитесь, что есть доступ к интернету.

### Производительность
Для оптимальной работы рекомендуется:
- Включить GZIP сжатие в Apache/Nginx
- Настроить кэширование статических файлов
- Использовать HTTP/2 (если поддерживается)

### Безопасность
Для production-сервера:
- Настройте HTTPS (SSL сертификат)
- Отключите директивы отладки
- Настройте правила firewall
- Регулярно обновляйте Open Server

## Полезные команды Open Server

- **Перезапуск всех сервисов:** Правый клик на иконке → "Перезапустить"
- **Просмотр логов:** Правый клик → "Логи" → выбрать нужный лог
- **Очистка кэша:** Правый клик → "Дополнительно" → "Очистить кэш DNS"
- **Проверка конфигурации:** Правый клик → "Дополнительно" → "Проверить конфигурацию"

## Дополнительная информация

Для более подробной технической информации см. файл `BUILD_GUIDE.md`

## Контрольный список развертывания

- [ ] Выполнена сборка (`npm run build`)
- [ ] Папка `dist` создана успешно
- [ ] Все файлы скопированы на сервер
- [ ] Файл `.htaccess` (или `web.config`) присутствует
- [ ] mod_rewrite включен (для Apache)
- [ ] Виртуальный хост настроен (если требуется)
- [ ] Open Server перезапущен
- [ ] Сайт открывается в браузере
- [ ] Все разделы доступны
- [ ] Изображения загружаются
- [ ] Нет ошибок в консоли браузера

---

**Версия:** 1.0  
**Дата:** 18 января 2026  
**Поддержка:** Open Server 5.x и выше
